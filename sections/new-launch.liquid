<script src="{{ 'carousel.js' | asset_url }}" ></script>
<script src="{{ 'splide.min.js' | asset_url }}" ></script>
{{ 'splide.min.css' | asset_url | stylesheet_tag }} 
{% style %}
#carousel--{{ section.id }}{
    display: block;
    padding-top: {{ section.settings.section-padding-top | times: 0.75 | round: 0 | append: 'px'  }};
    padding-bottom: {{ section.settings.section-padding-bottom | times: 0.75 | round: 0 | append: 'px'  }};
}
@media screen and (min-width: 750px) {
    #carousel--{{ section.id }}{
        padding-top: {{ section.settings.section-padding-top | append: 'px'  }};
        padding-bottom: {{ section.settings.section-padding-bottom | append: 'px'  }};
    }
}
{% endstyle %}

<carousel-component id="carousel--{{ section.id }}" class="page-width splide slider_component_container"
    data-autoplay="{{ section.settings.enable_autoplay | default: flase }}"
    data-autoplay-speed="{{ section.settings.autoplay_speed | times: 1000 | default: 3000  }}"
    data-desktopperpage="{{ section.settings.slides_perpage | default: 3 }}" 
    data-pagination="{{ section.settings.enable_pagination }}"
> 
    <div class="splide__track">
        <ul class="splide__list">
            {%- for block in section.blocks -%}
                <li class="splide__slide">
                    <div class=" tw-bg-teal-300">  
                        {{ 'product-4' | placeholder_svg_tag }}
                    </div>
                </li>
            {%- endfor -%}
        </ul>
    </div>
</carousel-component>
<script>
    var splide; 
    function initializeSplide() {
      var perPage = window.innerWidth > 749 ? 3 : 2; // Show 3 slides on desktop, 2 on mobile
      splide = new Splide('.splide', {
        perPage: perPage,
        rewind: true,
      });
  
      splide.mount();
    }
  
    // Initialize the Splide slider on page load
    initializeSplide();
  
    // Update the Splide slider when the window is resized
    window.addEventListener('resize', function () {
      splide.destroy(); // Destroy the existing Splide instance
      initializeSplide(); // Initialize a new instance with the updated perPage value
    });
  </script>

{% schema %}
    {
        "name":"Carousel",
        "settings": [
            {
                "type":"header",
                "content": "SECTION SETTINGS"
            },
            {
                "type": "text",
                "id": "section_heading",
                "label": "Heading",
                "default": "Heading"
            },
            {
                "type": "select",
                "id":"heading_align",
                "label": "Heading align",
                "options": [
                    {
                        "label": "Left",
                        "value": "tw-text-left"
                    },
                    {
                        "label": "Center",
                        "value": "tw-text-center"
                    },
                    {
                        "label": "Right",
                        "value": "tw-text-right"
                    }
                ],
                "default": "tw-text-center"
            },
            {
                "type":"header",
                "content":"SLIDER SETTINGS"
            },
            {
                "type": "checkbox",
                "id":"enable_pagination",
                "label": "Pagedots",
                "default": false
            },
            {
                "type": "checkbox",
                "id":"enable_autoplay",
                "label": "Autoplay",
                "default": false
            },
            {
                "type":"range",
                "id": "autoplay_speed",
                "label": "Autoplay interval",
                "min": 2,
                "max": 6,
                "default": 3,
                "info": "Default 3s"
            },
            {
                "type": "number",
                "id": "slides_perpage",
                "label": "Slides perpage",
                "default": 3,
                "info": "Default 3 slides"
            },
            {
                "type": "range",
                "id": "section-padding-top",
                "label": "Padding top",
                "default": 0,
                "min": 0,
                "max": 100
            },
            {
                "type": "range",
                "id": "section-padding-bottom",
                "label": "Padding bottom",
                "default": 0,
                "min": 0,
                "max": 100
            }
        ],
        "blocks": [
            {
                "name": "Carousel Block",
                "type": "carousel_block",
                "settings": [
                    {
                        "type":"header",
                        "content": "REPLACE THE THE SETTINGS WITH CUSTOM SETTINGS"
                    }
                ]
            }
        ],
        "presets": [
            {
                "name":"Carousel"
            }
        ]
    }
{% endschema %}