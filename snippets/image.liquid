{% comment %}
  Render an responsive image.
  Accepts:
  - class: {String} Class to add to the image.
  - mobileSrc: {Object} Image object for mobile
  - desktopSrc: {Object} Image object for desktop
  Usage:
  {% render 'image', class: '', mobileSrc: source, desktopSrc: source %}
{% endcomment %}

<picture class="{{ class }}">
  {% if mobileSrc %}
    <source
      media="(max-width: 749px)"
      srcset="
        {{ mobileSrc | image_url: width: 375 }} 375w,
        {{ mobileSrc | image_url: width: 550 }} 550w,
        {{ mobileSrc | image_url: width: 750 }} 750w,
        {{ mobileSrc | image_url: width: 1100 }} 1100w,
        {{ mobileSrc | image_url: width: 1500 }} 1500w,
        {{ mobileSrc | image_url: width: 1780 }} 1780w,
        {{ mobileSrc | image_url: width: 2000 }} 2000w,
        {{ mobileSrc | image_url: width: 3000 }} 3000w,
        {{ mobileSrc | image_url: width: 3840 }} 3840w,
        {{ mobileSrc | image_url }} {{ mobileSrc.width }}w
      "
      sizes="{{ mobileSize | default: '100vw' }}"
    >
  {% endif %}

  <source
    media="(min-width: 750px)"
    srcset="
      {{ desktopSrc | image_url: width: 375 }} 375w,
      {{ desktopSrc | image_url: width: 550 }} 550w,
      {{ desktopSrc | image_url: width: 750 }} 750w,
      {{ desktopSrc | image_url: width: 1100 }} 1100w,
      {{ desktopSrc | image_url: width: 1500 }} 1500w,
      {{ desktopSrc | image_url: width: 1780 }} 1780w,
      {{ desktopSrc | image_url: width: 2000 }} 2000w,
      {{ desktopSrc | image_url: width: 3000 }} 3000w,
      {{ desktopSrc | image_url: width: 3840 }} 3840w,
      {{ desktopSrc | image_url }} {{ desktopSrc.width }}w
    "
    sizes="{{ desktopSize | default: '100vw' }}"
  >

  <img
    src="{{ desktopSrc | image_url: width: 1500 }}"
    loading="lazy"
    width="{{ desktopSrc.width }}"
    height="{{ desktopSrc.width | divided_by: desktopSrc.aspect_ratio | round }}"
    alt="{{ alt | default: desktopSrc.alt | escape }}"
  >
</picture>
